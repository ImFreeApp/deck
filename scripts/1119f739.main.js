window.haunt={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";this.app=new this.Models.App,this.appView=new this.Views.AppView({model:this.app})}},$(document).ready(function(){"use strict";$(document).foundation(),haunt.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/app.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="page-container">\n  <!-- pages -->\n</div>\n\n';return __p},this.JST["app/scripts/templates/footer.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="row">\n  <div class="columns small-push-4 small-4 text-center">\n    <div>An<br><strong><a href="#">'+(null==(__t=org)?"":__t)+'</a></strong><br>Project</div>\n  </div>\n  <div class="columns small-4">\n    <ul class="inline-list right animate">\n      <li><a href="#">Contact</a></li>\n      <li><a href="#">Hipster</a></li>\n    </ul>\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/header.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="row">\n  <div class="columns col12">\n    <ul class="no-bullet">\n      <li class="title animate"><a href="#">Haunt</a></li>\n      <ul class="menu no-bullet">\n        <li class="animate"><a href="#">'+(null==(__t=user)?"":__t)+"</a></li>\n      </ul>\n    </ul>\n  </div>\n</div>\n\n";return __p},this.JST["app/scripts/templates/pages/page0.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">COVER</h2>    \n    \n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/pages/page1.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">Page 1</h2>\n    \n  </div>\n</div>\n\n';return __p},this.JST["app/scripts/templates/pages/page2.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">Page 2</h2>\n    \n  </div>\n</div>\n\n';return __p},this.JST["app/scripts/templates/pages/page3.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">Page 3</h2>\n    \n  </div>\n</div>\n\n';return __p},this.JST["app/scripts/templates/pages/page4.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">Page 4</h2>\n    \n  </div>\n</div>\n\n';return __p},this.JST["app/scripts/templates/pages/page5.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="row v-height-full">\n  <div class="col12 v-align-center">\n\n    <h2 class="text-center">Page 5</h2>\n    \n  </div>\n</div>\n\n';return __p},haunt.Models=haunt.Models||{},function(){"use strict";haunt.Models.App=Backbone.Model.extend({url:"",initialize:function(){this.pages=new haunt.Collections.Pages,this.set("org","Adequate Design Studios"),this.set("user","Terence Mckenna"),this.set("breakpointRatio",.5),this.on("changePage",function(a,b){this.set({currentPage:b,navDirection:a})})}})}(),haunt.Models=haunt.Models||{},function(){"use strict";haunt.Models.User=Backbone.Model.extend({url:"",initialize:function(){},defaults:{},validate:function(a,b){},parse:function(a,b){return a}})}(),haunt.Views=haunt.Views||{},function(){"use strict";haunt.Views.AppView=Backbone.View.extend({template:JST["app/scripts/templates/app.ejs"],pageTemplates:[{template:JST["app/scripts/templates/pages/page0.ejs"],backgroundColor:"#FFF"},{template:JST["app/scripts/templates/pages/page1.ejs"],backgroundColor:"#80DBFF"},{template:JST["app/scripts/templates/pages/page2.ejs"],backgroundColor:"#FFA10B"},{template:JST["app/scripts/templates/pages/page3.ejs"],backgroundColor:"#FF5703"},{template:JST["app/scripts/templates/pages/page4.ejs"],backgroundColor:"#52CC93"},{template:JST["app/scripts/templates/pages/page5.ejs"],backgroundColor:"#967DB3"}],id:"app",events:{},initialize:function(){this.headerView=new haunt.Views.HeaderView({model:this.model}),this.footerView=new haunt.Views.FooterView({model:this.model}),$("body").append(this.headerView.render()),$("body").append(this.render()),$("body").append(this.footerView.render()),this.pageViews=this.pageTemplates.map(this.generatePage,this),this.calculateSize(),$(window).on("resize",this.calculateSize.bind(this)),$(window).on("scroll",_.throttle(this.pageScroll.bind(this),30)),this.listenTo(this.model,"change:currentPage",this.changePage),this.pageScroll()},calculateSize:function(){this.DIMENSIONS={},this.DIMENSIONS.headerHeight=this.headerView.$el.outerHeight(),this.DIMENSIONS.footerHeight=this.footerView.$el.outerHeight(),this.DIMENSIONS.windowHeight=innerHeight,this.DIMENSIONS.pageEndBreakPoints=this.pageViews.reduce(function(a,b,c){var d=c>0?a[c-1]:0;return a.concat(d+b.$el.height())},[]),this.DIMENSIONS.bodyHeight=this.DIMENSIONS.pageEndBreakPoints[this.DIMENSIONS.pageEndBreakPoints.length-1],$("body").css({height:this.DIMENSIONS.bodyHeight})},pageScroll:function(a){var b=this.model.get("breakpointRatio"),c=this.DIMENSIONS.pageEndBreakPoints.reduce(function(a,c){return pageYOffset<c-innerHeight*(1-b)?a:a+1},0);c===this.model.get("currentPage")+1?this.model.trigger("changePage","up",c):c===this.model.get("currentPage")-1?this.model.trigger("changePage","down",c):c!==this.model.get("currentPage")&&this.model.trigger("changePage","skip",c)},changePage:function(a){this.model.pages.each(function(a){a.get("pageNumber")===this.get("currentPage")?a.trigger("show"):a.get("pageNumber")===this._previousAttributes.currentPage?a.trigger("send2background"):a.trigger("hide")}.bind(this.model)),this.model.get("currentPage")>0?(this.model.trigger("showHeader"),this.model.trigger("showFooter")):(this.model.trigger("hideHeader"),this.model.trigger("hideFooter"))},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el},generatePage:function(a,b){var c=this.model.pages.add({pageNumber:b}),d=new haunt.Views.Page({model:c});return _.extend(d,a),this.$el.find(".page-container").append(d.render()),d}})}(),haunt.Views=haunt.Views||{},function(){"use strict";haunt.Views.HeaderView=Backbone.View.extend({template:JST["app/scripts/templates/header.ejs"],tagName:"header",className:"animate",events:{},initialize:function(){this.listenTo(this.model,"change:user",this.render),this.listenTo(this.model,"showHeader",this.show),this.listenTo(this.model,"hideHeader",this.hide)},show:function(){this.$el.addClass("active")},hide:function(){this.$el.removeClass("active")},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el}})}(),haunt.Views=haunt.Views||{},function(){"use strict";haunt.Views.FooterView=Backbone.View.extend({template:JST["app/scripts/templates/footer.ejs"],tagName:"footer",className:"animate",events:{},initialize:function(){this.listenTo(this.model,"showHeader",this.show),this.listenTo(this.model,"hideHeader",this.hide)},show:function(){this.$el.addClass("active")},hide:function(){this.$el.removeClass("active")},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el}})}(),haunt.Models=haunt.Models||{},function(){"use strict";haunt.Models.Page=Backbone.Model.extend({url:"",initialize:function(){},defaults:{},validate:function(a,b){},parse:function(a,b){return a}})}(),haunt.Views=haunt.Views||{},function(){"use strict";haunt.Views.Page=Backbone.View.extend({events:{},className:"page",initialize:function(){this.$el.addClass("pageNumber-"+this.model.get("pageNumber")),this.listenTo(this.model,"show",this.show),this.listenTo(this.model,"send2background",this.send2background),this.listenTo(this.model,"hide",this.hide)},show:function(){this.$el.stop().css({zIndex:2,opacity:0}).animate({opacity:1},200)},send2background:function(){this.$el.stop().css({zIndex:1}).animate({opacity:1},400)},hide:function(){this.$el.stop().css({zIndex:0,opacity:0}).animate({opacity:0},400)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.css({backgroundColor:this.backgroundColor}),this.$el}})}(),haunt.Collections=haunt.Collections||{},function(){"use strict";haunt.Collections.Pages=Backbone.Collection.extend({model:haunt.Models.Page})}();